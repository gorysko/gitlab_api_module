<!doctype html>
<head>
	<title>Git Stats</title>
    <link rel="stylesheet" href="/static/css/style.css" />
    <title>Google Charts with Flask</title>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {'packages':['corechart']});

      google.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable({{ data|tojson }}, false);
        var commits = google.visualization.arrayToDataTable({{ commits|tojson }}, false);        
        var columnchart = new google.visualization.BarChart(
                document.getElementById('columnchart_div'));
        var donutchart = new google.visualization.PieChart(
                document.getElementById('donut_div'));
        columnchart.draw(data, {legend: 'none', vAxis: {baseline: 0}});
        donutchart.draw(commits, {legend: 'none', vAxis: {baseline: 0}, pieHole: 0.4});
      }
    </script>
</head>
	<div class=page>
      <h1>Git stats</h1>
      <div class=metanav>
          {% for message in get_flashed_messages() %}
            <div class=flash>{{ message }}</div>
          {% endfor %}
          {% if user %}
          	<div id="user" class="{{ 'hidden' if not user }}">
                <div class="row">
                    <div class="small-8 columns info">
                        <h1>Hi <span id="user-name">{{ user['name'] if user }}</span></h1>
                        <h5>Your email is:</h5>
                        <h3><span id="user-email">{{ user['email'] if user }}</span></h3>
                        <h5>Your ID is:</h5>
                        <h3><span id="user-id">{{ user['id'] if user }}</span></h3>
                    </div>
                    <div id="user-picture-column" class="small-4 columns">
                        <img id="user-picture" src="{{ user['avatar_url'] if user }}" />
                    </div>
                </div>
            </div>
          	<a href="{{ url_for("logout") }}">Logout</a>
          	{% block body %}{% endblock %}
          {% else %}
          	Hello! <a href="{{ url_for("login") }}">Login</a>
          {% endif %}

	  </div>
	</div>
</head>
